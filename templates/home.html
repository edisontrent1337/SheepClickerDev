<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Testing Django</title>
    <meta name="description" content="">
    <meta name="edisontrent1337" content="">
    <meta name="keywords" content="">

    {% load staticfiles %}
    <link href="{% static 'css/style.css' %}" type="text/css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700italic' rel='stylesheet'
          type='text/css'>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>




</head>


<div id="header">

</div>
<div id="content">
    {% load staticfiles %}
    <!-- <img src="{% static 'img/blue_tiled_cube.png' %}" alt="wtf"/>

     <input type="button" class="button" value="Increase Income"/>-->


    <input type="button" class="button_blue" id="mine" value="MINE"/>
    <input type="button" class="button_green" id="upgrade" value="UPGRADE"/>

    <span>Res:</span><span id="res">0</span></span>
    <span>Update Rate:</span> <span id="upd">0.02</span></span>
    <span>Level:</span><span id="level">1</span>
    <span>Ugrade Cost:</span><span id="cost">50</span>


    <script>
        var rate = 0.01;
        var value = 0;
        var level = 1;
        var cost = 50;

        var baseCost = 50;

        alert(rate);
        $(document).ready(function() {
            alert("jQuery is up");
        });


        $(function() {
             setInterval("updateData()", 50)
        });


        $(function() {
             setInterval("updateView()", 2000)
        });

        function updateData() {
            value+=rate;
        }

        function updateView() {
             var formVal = parseInt($('#res').html());
             if(value - formVal >= 1) {
                $('#res').text(parseInt(value));
            }
        }



        $('#upgrade').click(function() {

            if(value > cost) {
                rate = Math.round((rate*1.03 + 0.004*level)*100)/100;
                value = value - cost;
                level++;
                cost = Math.round(Math.pow(1.5, level)*baseCost);
                $('#cost').text(cost);
                $('#res').text(parseInt(value));
                $('#upd').text(rate);
                $('#level').text(level);
             }
        });


        $('#mine').click(function() {
          var formVal = parseInt($('#res').html());
                value++;
             if(value - formVal >= 1) {
                $('#res').text(parseInt(value));
            }

        });



    </script>

</div>
<div id="footer"></div>

</body>
</html>